{% extends "base.html" %}

{% block title %}Administrar Elastic{% endblock %}

{% block content %}
<div class="container py-5">
  <h1 class="mb-4 text-center">Administrar Elastic</h1>

  <div class="card bg-card text-white mb-4">
    <div class="card-body">
      <h5 class="card-title">Índice actual:</h5>
      <p class="card-text mb-2"><strong>{{ indice_actual }}</strong></p>
      <h5 class="card-title">Libros indexados en Elasticsearch:</h5>
      <p class="card-text mb-2"><strong>{{ total_indexados_es }}</strong></p>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="card card-dark h-100 shadow">
      <div class="card-body">
        <h3 class="card-title">Cargar e indexar libros</h3>
        <p class="card-text">
          Sube un archivo JSON con los libros. Se guardarán en MongoDB y se indexarán en Elasticsearch.
        </p>
        <p class="card-text">
          Libros indexados en Elasticsearch: <strong>{{ total_indexados_es }}</strong>
        </p>
        <a href="{{ url_for('admin_cargar') }}" class="btn btn-primary mt-2">
          Ir a carga de archivos
        </a>
      </div>
    </div>
  </div>

  {% if error_ping %}
    <div class="alert alert-danger" role="alert">
      No se pudo hacer ping al servidor de Elasticsearch.<br>
      <small>{{ error_ping }}</small>
    </div>
  {% endif %}

  {% if error_conexion %}
    <div class="alert alert-danger" role="alert">
      No se pudo conectar con Elasticsearch.<br>
      <small>{{ error_conexion }}</small>
    </div>
  {% endif %}
</div>
{% endblock %}
